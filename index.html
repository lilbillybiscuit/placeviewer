<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="style.css">
        <script src="https://cdn.jsdelivr.net/npm/pako@2.0.4/dist/pako.min.js"></script>
    </head>
    <body>
        <div class="slider" id="slider">
            <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
        </div>
        <script>
            function jsonify(blob) {
                var jsonreader = new FileReader();
                var buffer;
                jsonreader.onload = function(event) {
                    buffer = jsonreader.result;
                    try {
                         let result = pako.ungzip(new Uint8Array(buffer), {to: "string"});
                         let obj = JSON.parse(result);
                         console.log(obj);
                    } catch (err) {
                        console.log(err);
                    }
                }
                jsonreader.readAsArrayBuffer(blob);
            }
            function updatebytime(time) {
                // Could use better processing algorithm here but laziness :P
                fetch("processing/segments/1490172525.json.gz").then( response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error: ${response.status}`);
                    }
                    return response.blob();
                }).then(blob=>jsonify(blob));
            }
        </script>
    </body>
</html>